<app-search></app-search>
<div class="flex h-full w-full items-center justify-center">
  <div class="border-4 backdrop-blur-xs">
    <div class="p-1">
      <img
        [src]="(fetchedUser()?.avatar | imageParse) ?? 'https://pic.re/image'"
        alt=""
        class="mx-auto aspect-square w-32 rounded-full object-cover p-4 sm:w-60 md:w-80 lg:w-100"
      />
      <div class="text-center text-3xl text-white">{{ fetchedUser()?.username }}</div>
      <div class="flex items-center justify-center">
        <div class="p-1 text-xl text-white">
          {{ fetchedUser()?.isOnline ? 'Online' : 'Offline' }}
        </div>
        <div
          class="h-4 w-4 rounded-full"
          [class.bg-red-500]="!fetchedUser()?.isOnline"
          [class.bg-green-500]="fetchedUser()?.isOnline"
        ></div>
      </div>
      <div class="flex justify-center">
        @switch (true) {
          @case (isInvited() && !isCurrentUserInviting()) {
            <div class="flex flex-col items-center">
              <span class="text-2xl text-(--mint-leaf)">Invite sent! We wish you well!</span>
              <button
                class="btn-invite text-(--honey-bronze) hover:bg-(--honey-bronze) hover:text-(--burgundy)"
                (click)="onRemove()"
              >
                Cancel Invite
              </button>
            </div>
          }

          @case (isInvited() === false) {
            <span class="text-2xl text-red-500">Removed</span>
          }

          @case (friendsStatus() === null) {
            <button class="btn-invite" (click)="onInvite()">Invite to friends</button>
          }

          @case (friendsStatus() === FriendsInvStatus.Pending && isCurrentUserInviting()) {
            <div class="flex flex-col items-center">
              <button
                class="btn-invite text-(--honey-bronze) hover:bg-(--honey-bronze) hover:text-(--burgundy)"
                (click)="onRemove()"
              >
                Cancel Invite
              </button>
            </div>
          }
          @case (friendsStatus() === FriendsInvStatus.Accepted) {
            <div class="flex flex-col items-center">
              <span class="text-2xl text-green-500 italic">You are Friends!</span>
              <button
                class="btn-invite mt-2 text-red-500 hover:bg-red-500 hover:text-black"
                (click)="onRemove()"
              >
                Remove friend
              </button>
            </div>
          }
          @case (friendsStatus() === FriendsInvStatus.Pending && !isCurrentUserInviting()) {
            <div class="flex flex-col items-center">
              <span class="text-2xl text-green-500 italic">You're being invited</span>
              <div class="flex items-center gap-2 p-1">
                <button class="btn-invite" (click)="onAccept()">Accept</button>
                <button
                  class="btn-invite text-red-500 hover:bg-red-500 hover:text-black"
                  (click)="onRemove()"
                >
                  Decline
                </button>
              </div>
            </div>
          }
        }
      </div>
    </div>
  </div>
</div>
